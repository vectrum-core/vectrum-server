# VECTRUM WEB SERVER
Сервер отдает страницы с приложением на React.js и обеспечивает ему API.


## Журнал изменений
[Журнал изменений](CHANGELOG.md).


## Описание API
[Описание API](/docs/api).


## Приложение на React.js
Приложение пишется отдельно и устанавливается в собранном виде
в папку `scr/react-app` при выпуске новой версии сервера.
Из файла `scr/react-app/index.html` создается файл `src/views/layout-for-react-app.hbs`
со вставкой переменных для шаблонизатора.
Сам файл удаляется `scr/react-app/index.html` после этого.


## Структура папки `data`
Главноче что в ней должно быть - это файл с натройками для сервера.

Структура папки:
```
./public/* - папка со статическими файлами отдаваемыми сервером
./config.json - файл с настройками
./debug.log - файл с логами сервера (создается автоматически)
./jwk-key-priv.json - файл приватного ключа JWK (пока не используется)
./jwk-key-pub.json - файл публичного ключа JWK (пока не используется)
```


## Файл с настройками
Файл с настройками [example-config.json](example-config.json)
необходимо скопировать в папку `data`, заполнить и переименовать
в `config.json` для работы в режиме `production`
или в `development-config.json` для работы в режиме `development`.


## Установка и запуск
Лучше всего оставить сервер работать по http за Nginx

- Установить зависимости
```bash
yarn install
```

- Установить переменные и запустить
```bash
NODE_ENV=production \
DATA_DIR=/data \
yarn start:prod
```
